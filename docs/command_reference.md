# タスク管理システム コマンドリファレンス

## コマンド一覧

### task start
システムの初期化を行います。

**使用法:**
```bash
task start
```

**オプション:** なし

**説明:**
- タスク管理システムの初期化を行います
- 必要なディレクトリ構造を作成
- 初期設定ファイルを配置
- デフォルトテンプレートを配置
- Gitリポジトリを初期化

### task init
既存のシステムを再初期化します。

**使用法:**
```bash
task init
```

**オプション:** なし

**説明:**
- 既存のデータを保持したまま再初期化
- 破損した設定を修復
- 不足しているファイルを再作成

### task add
新しいタスクを追加します。

**使用法:**
```bash
task add <タスク名> [オプション]
task add <タスク名1,タスク名2,...> [オプション]
```

**オプション:**
- `-d, --description <説明>`: タスクの詳細説明
- `-p, --priority <優先度>`: タスクの優先度（high/medium/low）
- `-s, --status <ステータス>`: タスクの初期ステータス
- `-c, --concerns <懸念事項>`: タスクの懸念事項

**説明:**
- 単一または複数のタスクを追加
- コンマ区切りで複数タスクを一括追加可能
- 自動的にタスクIDを生成

### task subtask
既存のタスクにサブタスクを追加します。

**使用法:**
```bash
task subtask <親タスクID> <サブタスク名> [オプション]
task subtask <親タスクID> <サブタスク名1,サブタスク名2,...> [オプション]
```

**オプション:**
- `-d, --description <説明>`: サブタスクの詳細説明
- `-s, --status <ステータス>`: サブタスクの初期ステータス
- `-c, --concerns <懸念事項>`: サブタスクの懸念事項

**説明:**
- 既存タスクの下にサブタスクを追加
- 複数のサブタスクを一括追加可能
- 親タスクのIDをプレフィックスとした自動ID生成

### task status
タスクのステータスを変更します。

**使用法:**
```bash
task status <タスクID> <新ステータス>
task status <タスクID1,タスクID2,...> <ステータス1,ステータス2,...>
```

**ステータス:**
- `not_started`: 未着手
- `in_progress`: 進行中
- `completed`: 完了

**説明:**
- 単一または複数タスクのステータスを変更
- 親タスクのステータスを自動更新
- 変更履歴を記録

### task list
タスク一覧を表示します。

**使用法:**
```bash
task list [オプション]
```

**オプション:**
- `-f, --format <形式>`: 表示形式（simple/detailed）
- `-s, --status <ステータス>`: ステータスでフィルタリング
- `-p, --parent`: 親タスクのみ表示
- `-q, --query <検索語>`: キーワード検索

**説明:**
- タスク一覧を表示
- 様々な条件でフィルタリング可能
- 詳細表示オプションあり

### task template
テンプレートの管理を行います。

**使用法:**
```bash
task template <サブコマンド> [オプション]
```

**サブコマンド:**
- `use <テンプレート名>`: テンプレートの切り替え
- `show`: 現在の設定を表示
- `config <キー> <値>`: 設定値の変更
- `reset`: デフォルト設定に戻す

**説明:**
- テンプレートの切り替えと設定
- 表示形式のカスタマイズ
- シンボルや書式の設定

### task sync
タスクデータと表示を同期します。

**使用法:**
```bash
task sync [オプション]
```

**オプション:**
- `-f, --force`: 強制同期
- `-b, --backup`: バックアップを作成
- `-c, --check`: 同期状態のチェックのみ

**説明:**
- データと表示の同期を実行
- バックアップオプションあり
- 同期状態の確認が可能

### task sort
タスクの並び替えを行います。

**使用法:**
```bash
task sort <フィールド> [順序]
```

**フィールド:**
- `name`: タスク名
- `status`: ステータス
- `id`: タスクID

**順序:**
- `asc`: 昇順（デフォルト）
- `desc`: 降順

**説明:**
- タスクを指定フィールドで並び替え
- 昇順/降順の指定が可能
- 自動的に同期を実行

### task validate
データの整合性を検証します。

**使用法:**
```bash
task validate [オプション]
```

**オプション:**
- `-d, --data-only`: タスクデータのみ検証
- `-q, --quiet`: エラーのみ表示

**説明:**
- YAMLファイルの構文チェック
- タスクIDの形式チェック
- タスクステータスの検証
- 親子関係の循環参照チェック
- 必須フィールドの存在チェック
- 親タスクの存在チェック
- 設定ファイルの検証

## 共通オプション

以下のオプションは、多くのコマンドで共通して使用できます：

- `-h, --help`: ヘルプメッセージを表示
- `-v, --version`: バージョン情報を表示
- `-q, --quiet`: 出力を最小限に抑える
- `-d, --debug`: デバッグ情報を表示

## 終了コード

- `0`: 正常終了
- `1`: 一般的なエラー
- `2`: コマンドライン引数のエラー
- `3`: データ整合性エラー
- `4`: ファイルシステムエラー

## 環境変数

- `TASK_DIR`: タスク管理システムのルートディレクトリ
- `TASK_CONFIG`: 設定ファイルの場所
- `TASK_TEMPLATE`: 使用するテンプレート
- `TASK_DEBUG`: デバッグモードの有効化（1=有効） 